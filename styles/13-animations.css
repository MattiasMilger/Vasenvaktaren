/* =============================================================================
   13-animations.css - Animations and Visual Effects
   ============================================================================= */

/* =============================================================================
   IDLE ANIMATION FOR VÄSEN PORTRAITS - Gentle floating + scale pulse
   ============================================================================= */

/* Container wrappers for animations */
.vasen-thumb-container,
.party-vasen-img-container,
.standard-vasen-img-container,
.details-image-container,
.heal-vasen-img-container,
.rune-vasen-img-container,
.combatant-image-container,
.starter-image-container {
    position: relative;
    overflow: visible; /* Changed from hidden to allow subtle movement */
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.vasen-thumb-container {
    width: 48px;
    height: 48px;
}

.party-vasen-img-container {
    width: 48px;
    height: 48px;
}

.standard-vasen-img-container {
    width: 64px;
    height: 64px;
}

.details-image-container {
    width: 96px;
    height: 96px;
}

.heal-vasen-img-container,
.rune-vasen-img-container {
    width: 48px;
    height: 48px;
}

/* Ensure images display properly */
.heal-vasen-img,
.rune-vasen-img {
    width: 48px;
    height: 48px;
    image-rendering: pixelated;
    display: block;
}

/* Apply idle animation to all väsen images */
.vasen-thumb,
.party-vasen-img,
.standard-vasen-img,
.details-image,
.combatant-image,
.heal-vasen-img,
.rune-vasen-img,
.starter-image {
    image-rendering: pixelated;
    animation: vasenIdle 4s ease-in-out infinite;
    transform-origin: center center;
}

/* Idle animation keyframes - gentle floating + scale pulse */
@keyframes vasenIdle {
    0%, 100% {
        transform: translateY(0px) scale(1);
    }
    50% {
        transform: translateY(-3px) scale(1.02);
    }
}

/* Vary animation timing for different sizes to feel more organic */
.vasen-thumb {
    animation-duration: 3.5s;
    animation-delay: 0s;
}

.party-vasen-img {
    animation-duration: 4s;
    animation-delay: 0.3s;
}

.standard-vasen-img {
    animation-duration: 4.2s;
    animation-delay: 0.5s;
}

.details-image {
    animation-duration: 4.5s;
    animation-delay: 0s;
}

.combatant-image {
    animation-duration: 3.8s;
    animation-delay: 0.2s;
}

.starter-image {
    animation-duration: 4s;
    animation-delay: 0.4s;
}

/* Pause animation on knocked out */
.combatant-image.knocked-out {
    animation: none;
    filter: grayscale(1);
    opacity: 0.5;
}

/* Override container in modal buttons to center the portrait */
.ally-select-btn .standard-vasen-img-container,
.swap-modal-btn .standard-vasen-img-container,
.knockout-swap-btn .standard-vasen-img-container,
.add-vasen-btn .standard-vasen-img-container {
    width: 64px;
    height: 64px;
    overflow: visible;
    margin: 0 auto;
}

/* Ensure the image itself is not clipped */
.ally-select-btn .standard-vasen-img,
.swap-modal-btn .standard-vasen-img,
.knockout-swap-btn .standard-vasen-img,
.add-vasen-btn .standard-vasen-img {
    width: 64px;
    height: 64px;
    display: block;
}

/* Center portraits in swap party cards */
.swap-party-card .standard-vasen-img-container {
    width: 64px;
    height: 64px;
    overflow: visible;
    margin: 0 auto;
}

.swap-party-card .standard-vasen-img {
    width: 64px;
    height: 64px;
    display: block;
}

.swap-party-card .standard-vasen-info {
    text-align: center;
    width: 100%;
}

/* =============================================================================
   ZONE IMAGE WAVE EFFECT - SVG filter-based ripple for zone description images
   ============================================================================= */

.zone-image {
    display: block;
    max-width: 100%;
    height: auto;
    image-rendering: pixelated;
    filter: url(#zone-wave-filter);
    /* Ensure the image remains static in layout */
    position: relative;
    margin: 0 auto var(--spacing-md) auto;
}

/* =============================================================================
   ABILITY ANIMATIONS - Flash ability animations on combat panels
   ============================================================================= */

/* Ability animation overlay container */
.ability-animation-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: none;
    z-index: 10;
    animation: abilityAnimationFade 500ms ease-in-out;
}

/* Ability animation image */
.ability-animation-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    opacity: 0.7;
}

/* Flipped state for enemy attacks */
.ability-animation-image.flipped {
    transform: scaleX(-1);
}

/* Fade animation */
@keyframes abilityAnimationFade {
    0% {
        opacity: 0;
    }
    20% {
        opacity: 1;
    }
    80% {
        opacity: 1;
    }
    100% {
        opacity: 0;
    }
}

/* Responsive sizing for mobile - make animations larger and more visible */
@media (max-width: 992px) {
    .ability-animation-image {
        /* Scale up the animation on mobile since it's centered on a smaller portrait */
        width: 200%;
        height: 200%;
        max-width: 200px;
        max-height: 200px;
    }
}

@media (max-width: 600px) {
    .ability-animation-image {
        /* Even larger on very small screens */
        width: 250%;
        height: 250%;
        max-width: 180px;
        max-height: 180px;
    }
}

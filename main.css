/* =============================================================================
   main.css - Vasenvaktaren Styles
   Nordic-inspired dark theme with matte colors
   ============================================================================= */

/* CSS Variables */
:root {
    /* Base colors */
    --bg-primary: #1a1a1f;
    --bg-secondary: #252530;
    --bg-tertiary: #2d2d3a;
    --bg-card: #323240;
    --bg-hover: #3a3a4a;

    /* Text colors */
    --text-primary: #f0f0f4;
    --text-secondary: #c8c8d8;
    --text-muted: #9090a0;
    --text-accent: #d8c8a6;

    /* Element colors */
    --element-earth: #a08565;
    --element-nature: #6a9a6a;
    --element-water: #5a8aaa;
    --element-fire: #c06a5a;
    --element-wind: #a08ab0;

    /* Rarity colors */
    --rarity-common: #a0a0a0;
    --rarity-uncommon: #5aaa5a;
    --rarity-rare: #5a8ada;
    --rarity-mythical: #aa6ada;

    /* UI colors */
    --health-color: #6a9a5a;
    --health-low: #a85a4a;
    --megin-color: #5a7a9a;
    --exp-color: #9a8a5a;

    /* Accent colors */
    --accent-primary: #8a9a7a;
    --accent-secondary: #7a8a9a;
    --accent-danger: #b06a6a;
    --accent-warning: #b09a6a;

    /* Border and shadow */
    --border-color: #505060;
    --border-light: #606070;
    --shadow-color: rgba(0, 0, 0, 0.3);

    /* Sizing */
    --border-radius: 8px;
    --border-radius-sm: 4px;
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;

    /* Typography */
    --font-family: 'Segoe UI', 'Roboto', sans-serif;
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-base: 1rem;
    --font-size-lg: 1.125rem;
    --font-size-xl: 1.5rem;
    --font-size-2xl: 2rem;
}

/* Reset and Base */
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html, body {
    height: 100%;
    overflow: hidden;
}

body {
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    color: var(--text-primary);
    background: var(--bg-primary);
    line-height: 1.5;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary);
    font-weight: 600;
}

h1 { font-size: var(--font-size-2xl); }
h2 { font-size: var(--font-size-xl); }
h3 { font-size: var(--font-size-lg); }
h4 { font-size: var(--font-size-base); }

p { margin-bottom: var(--spacing-sm); }

strong, b { color: var(--text-accent); }

/* Buttons */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm) var(--spacing-md);
    font-size: var(--font-size-sm);
    font-weight: 500;
    color: var(--text-primary);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn:hover:not(:disabled) {
    background: var(--bg-hover);
    border-color: var(--border-light);
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.btn-primary {
    background: var(--accent-primary);
    border-color: var(--accent-primary);
}

.btn-primary:hover:not(:disabled) {
    background: #8a9a7a;
}

.btn-secondary {
    background: var(--bg-secondary);
}

.btn-danger {
    background: var(--accent-danger);
    border-color: var(--accent-danger);
}

.btn-danger:hover:not(:disabled) {
    background: #aa6a6a;
}

.btn-large {
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: var(--font-size-lg);
}

/* Screens */
.screen {
    display: none;
    width: 100%;
    height: 100%;
}

.screen.active {
    display: flex;
}

/* Main Menu Screen */
#main-menu-screen {
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xl);
    background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
}

.menu-title {
    text-align: center;
}

.menu-title h1 {
    font-size: 3rem;
    color: var(--text-accent);
    margin-bottom: var(--spacing-sm);
    letter-spacing: 2px;
}

.menu-title p {
    color: var(--text-secondary);
    font-size: var(--font-size-lg);
}

.menu-buttons {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.menu-buttons .btn {
    min-width: 200px;
}

/* Starter Select Screen */
#starter-select-screen {
    flex-direction: column;
    align-items: center;
    padding: var(--spacing-xl);
    overflow-y: auto;
}

.starter-intro {
    text-align: center;
    margin-bottom: var(--spacing-xl);
}

.starter-intro h2 {
    color: var(--text-accent);
    margin-bottom: var(--spacing-sm);
}

#starter-options {
    display: flex;
    gap: var(--spacing-lg);
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: var(--spacing-xl);
}

.starter-card {
    width: 200px;
    padding: var(--spacing-md);
    background: var(--bg-card);
    border: 2px solid var(--border-color);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
}

.starter-card:hover {
    transform: translateY(-4px);
    border-color: var(--border-light);
}

.starter-card.selected {
    border-color: var(--accent-primary);
    box-shadow: 0 0 20px rgba(122, 138, 106, 0.3);
}

.starter-image {
    width: 96px;
    height: 96px;
    margin-bottom: var(--spacing-sm);
    image-rendering: pixelated;
}

.starter-name {
    font-size: var(--font-size-lg);
    font-weight: 600;
    margin-bottom: var(--spacing-xs);
}

.starter-family {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    margin-bottom: var(--spacing-sm);
}

.starter-description {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    margin-top: var(--spacing-sm);
}

/* Game Screen - Three Column Layout */
#game-screen {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr auto;
    height: 100vh;
    overflow: hidden;
}

/* Main game area - three column layout */
.game-main {
    display: grid;
    grid-template-columns: 300px 490px 1fr;
    gap: 0;
    overflow: hidden;
    min-height: 0;
}

/* ============================================
   LEFT PANEL - Inventory (Väsen, Runes, Items)
   ============================================ */
.panel-left {
    display: flex;
    flex-direction: column;
    background: var(--bg-secondary);
    border-right: 1px solid var(--border-color);
    overflow: hidden;
    min-height: 0;
}

.panel-left .panel-tabs {
    display: flex;
    border-bottom: 1px solid var(--border-color);
    flex-shrink: 0;
}

.panel-left .panel-content {
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    min-height: 0;
}

/* ============================================
   MIDDLE PANEL - Party & Zone Selection
   ============================================ */
.panel-middle {
    display: flex;
    flex-direction: column;
    background: var(--bg-tertiary);
    border-right: 1px solid var(--border-color);
    overflow: hidden;
    min-height: 0;
}

/* ============================================
   RIGHT PANEL - Combat/Action Area
   ============================================ */
.panel-right {
    display: flex;
    flex-direction: column;
    background: var(--bg-primary);
    overflow: hidden;
    min-height: 0;
}

/* Section titles */
.section-title {
    margin-bottom: var(--spacing-sm);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Header */
.game-header {
    grid-column: 1 / -1;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
}

.header-left {
    display: flex;
    flex-direction: column;
}

.header-left h1 {
    font-size: var(--font-size-lg);
    color: var(--text-accent);
}

.header-left p {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin: 0;
}

.header-center {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
}

#player-profile {
    cursor: pointer;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--border-radius-sm);
    transition: background 0.2s;
}

#player-profile:hover {
    background: var(--bg-hover);
}

.header-right {
    display: flex;
    gap: var(--spacing-sm);
}

/* Left Panel - Inventory */
.left-panel {
    display: flex;
    flex-direction: column;
    background: var(--bg-secondary);
    border-right: 1px solid var(--border-color);
    overflow: hidden;
}

.tab-container {
    display: flex;
    border-bottom: 1px solid var(--border-color);
}

.tab-btn {
    flex: 1;
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border: none;
    border-bottom: 2px solid transparent;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
}

.tab-btn:hover {
    background: var(--bg-hover);
}

.tab-btn.active {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border-bottom-color: var(--accent-primary);
}

.tab-content {
    display: none;
    flex: 1;
    overflow-y: auto;
    padding: var(--spacing-sm);
}

.tab-content.active {
    display: block;
}

/* Vasen Details Panel - Shows when a Vasen is selected in LEFT panel */
#vasen-details-panel {
    flex-shrink: 0;
    border-top: 1px solid var(--border-color);
    padding: var(--spacing-sm);
    max-height: 40%;
    overflow-y: auto;
    background: var(--bg-card);
}

#vasen-details-panel:empty {
    display: none;
    padding: 0;
    border: none;
}

/* Party Section - Top of Middle Panel */
.party-section {
    padding: var(--spacing-md);
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    flex-shrink: 0;
}

.party-section h3 {
    margin-bottom: var(--spacing-sm);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.party-slots {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.party-slot {
    min-height: 60px;
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all 0.2s;
}

.party-slot:hover {
    border-color: var(--border-light);
}

.party-slot.filled {
    border-color: var(--accent-secondary);
}

.party-vasen {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.party-vasen-img {
    width: 48px;
    height: 48px;
    image-rendering: pixelated;
}

.party-vasen-info {
    display: flex;
    flex-direction: column;
}

.party-vasen-name {
    font-weight: 600;
    font-size: var(--font-size-sm);
}

.party-vasen-level {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.party-vasen-bars {
    display: flex;
    flex-direction: column;
    gap: 2px;
    flex: 1;
    min-width: 60px;
}

.mini-bar {
    height: 4px;
    background: var(--bg-primary);
    border-radius: 2px;
    overflow: hidden;
}

.mini-bar.health .mini-bar-fill {
    background: var(--health-color);
}

.mini-bar.megin .mini-bar-fill {
    background: var(--megin-color);
}

.mini-bar-fill {
    height: 100%;
    transition: width 0.3s ease;
}

.party-vasen-runes {
    display: flex;
    gap: 2px;
}

.mini-rune {
    font-size: var(--font-size-lg);
    cursor: help;
}

.party-slot-actions {
    display: flex;
    gap: 4px;
    margin-left: auto;
}

.party-action-btn {
    width: 24px;
    height: 24px;
    padding: 0;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    cursor: pointer;
    font-size: var(--font-size-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.party-action-btn:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.party-action-btn.remove-btn:hover {
    background: rgba(176, 106, 106, 0.3);
    border-color: var(--accent-danger);
    color: var(--accent-danger);
}

.party-action-btn.move-btn:hover {
    background: rgba(122, 138, 154, 0.3);
    border-color: var(--accent-secondary);
    color: var(--accent-secondary);
}

.party-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--text-muted);
}

.party-hint {
    font-size: var(--font-size-xs);
}

/* Zone Section - Bottom of Middle Panel */
.zone-section {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: var(--spacing-md);
    overflow: hidden;
    min-height: 0;
}

.zone-section h3 {
    flex-shrink: 0;
    margin-bottom: var(--spacing-sm);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

#zone-list {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    overflow-y: auto;
    min-height: 0;
}

.zone-btn {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.2s;
}

.zone-btn:hover:not(:disabled) {
    background: var(--bg-hover);
}

.zone-btn.selected {
    border-color: var(--accent-primary);
    background: var(--bg-tertiary);
}

.zone-btn.locked {
    opacity: 0.5;
    cursor: not-allowed;
}

.zone-btn.cleared .zone-name::after {
    content: ' ✓';
    color: var(--accent-primary);
}

.zone-name {
    font-weight: 500;
}

.zone-levels {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.zone-locked {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.zone-divider {
    padding: var(--spacing-xs);
    text-align: center;
    color: var(--text-accent);
    font-size: var(--font-size-sm);
    border-top: 1px solid var(--border-color);
    margin-top: var(--spacing-sm);
}

.zone-actions {
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
}

#explore-btn {
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: var(--font-size-lg);
    font-weight: 600;
    background: var(--accent-primary);
    color: var(--text-primary);
    border: none;
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all 0.2s;
}

#explore-btn:hover:not(:disabled) {
    background: #9aaa8a;
    transform: translateY(-1px);
}

#explore-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

#challenge-btn {
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: var(--font-size-lg);
    font-weight: 600;
    background: var(--accent-danger);
    border-color: var(--accent-danger);
    color: var(--text-primary);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all 0.2s;
}

#challenge-btn:hover:not(:disabled) {
    background: #c07a7a;
    transform: translateY(-1px);
}

#challenge-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.zone-actions .btn-hint {
    font-size: var(--font-size-xs);
    font-weight: normal;
    opacity: 0.8;
}


/* ============================================
   RIGHT PANEL Content Styling
   ============================================ */
#zone-description {
    padding: var(--spacing-md);
    flex: 1;
    overflow-y: auto;
}

#zone-description h3 {
    color: var(--text-accent);
    margin-bottom: var(--spacing-sm);
}

#zone-description p {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
}

/* Combat Area - takes full right panel during combat */
#combat-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.zone-meta {
    display: flex;
    gap: var(--spacing-md);
    margin-top: var(--spacing-sm);
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

/* Combat UI */
#combat-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

#combat-ui {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

#combat-ui.active {
    display: flex;
}

.combat-header {
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
    text-align: center;
    flex-shrink: 0;
}

#turn-counter {
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--text-accent);
}

.combat-arena {
    display: flex;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    flex-shrink: 0;
    overflow: hidden;
    align-items: flex-start;
}

.combat-versus {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-lg);
    font-weight: bold;
    color: var(--text-accent);
    padding: 0 var(--spacing-sm);
}

.combatant-panel {
    flex: 1;
    padding: var(--spacing-md);
    background: var(--bg-card);
    border-radius: var(--border-radius);
    border: 1px solid var(--border-color);
    overflow-y: auto;
    max-height: 380px;
}

.player-side {
    border-color: var(--accent-primary);
}

.enemy-side {
    border-color: var(--accent-danger);
}

.combatant-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-sm);
}

.combatant-name {
    font-size: var(--font-size-sm);
    font-weight: 600;
}

.combatant-level {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.combatant-image-container {
    position: relative;
    text-align: center;
    margin-bottom: var(--spacing-sm);
}

.combatant-image {
    width: 96px;
    height: 96px;
    image-rendering: pixelated;
    transition: all 0.2s;
}

.combatant-image.knocked-out {
    filter: grayscale(1);
    opacity: 0.5;
}

.combatant-image.hit-flash {
    filter: brightness(2) saturate(0);
}

.status-icon {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    padding: 2px 6px;
    background: var(--accent-warning);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    color: var(--bg-primary);
}

.combatant-bars {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-sm);
}

.combat-bar {
    position: relative;
    height: 20px;
    background: var(--bg-primary);
    border-radius: var(--border-radius-sm);
    overflow: hidden;
}

.combat-bar-fill {
    height: 100%;
    transition: width 0.3s ease;
}

.health-fill {
    background: linear-gradient(90deg, var(--health-color), #7aaa6a);
}

.megin-fill {
    background: linear-gradient(90deg, var(--megin-color), #6a8aaa);
}

.combat-bar-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: var(--font-size-xs);
    font-weight: 600;
    text-shadow: 1px 1px 2px var(--bg-primary);
}

.combatant-info {
    display: flex;
    gap: var(--spacing-xs);
    flex-wrap: wrap;
    margin-bottom: var(--spacing-xs);
}

.temperament-badge {
    padding: 2px 6px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    cursor: help;
}

.combatant-attributes {
    display: flex;
    gap: var(--spacing-xs);
    flex-wrap: wrap;
    margin-bottom: var(--spacing-xs);
    padding: var(--spacing-xs);
    background: var(--bg-primary);
    border-radius: var(--border-radius-sm);
}

.combat-attr {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 40px;
    padding: 2px 4px;
    cursor: help;
}

.combat-attr-name {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.combat-attr-value {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--text-primary);
}

.combatant-runes {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 4px;
    margin-bottom: var(--spacing-xs);
    font-size: var(--font-size-xs);
}

.runes-label {
    color: var(--text-muted);
    font-weight: 500;
}

.no-rune {
    color: var(--text-muted);
    font-style: italic;
}

.combat-rune {
    font-size: var(--font-size-xs);
    padding: 2px 4px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius-sm);
    cursor: help;
}

.combatant-stages {
    display: flex;
    flex-wrap: wrap;
    gap: 2px;
    font-size: var(--font-size-xs);
}

.stage-indicator {
    padding: 1px 4px;
    border-radius: var(--border-radius-sm);
}

.stage-indicator.positive {
    background: rgba(90, 138, 90, 0.3);
    color: #8aca8a;
}

.stage-indicator.negative {
    background: rgba(138, 90, 90, 0.3);
    color: #ca8a8a;
}

.no-stages {
    color: var(--text-muted);
}

.combatant-attack-elements {
    margin-top: var(--spacing-xs);
    font-size: var(--font-size-xs);
}

.elements-label {
    color: var(--text-muted);
}

.element-mini {
    display: inline-block;
    padding: 1px 4px;
    margin-left: 2px;
    border-radius: var(--border-radius-sm);
    cursor: help;
}

/* Combat Log */
#combat-log {
    flex: 1 1 auto;
    min-height: 40px;
    max-height: 230px;
    overflow-y: auto;
    padding: var(--spacing-sm);
    background: var(--bg-primary);
    border-top: 1px solid var(--border-color);
    font-size: var(--font-size-sm);
}

.combat-log-entry {
    padding: 2px 0;
    border-bottom: 1px solid var(--border-color);
}

.combat-log-entry.encounter { color: var(--text-accent); }
.combat-log-entry.turn { color: var(--accent-primary); font-weight: 600; }
.combat-log-entry.damage { color: var(--accent-danger); }
.combat-log-entry.heal { color: var(--health-color); }
.combat-log-entry.rune { color: var(--rarity-rare); }
.combat-log-entry.exp { color: var(--exp-color); }
.combat-log-entry.levelup { color: var(--rarity-mythical); font-weight: 600; }
.combat-log-entry.tame { color: var(--accent-primary); font-weight: 600; }
.combat-log-entry.swap { color: var(--text-secondary); }
.combat-log-entry.system { color: var(--text-muted); font-style: italic; }
.combat-log-entry.potent { color: #6aca6a; }
.combat-log-entry.weak { color: #ca8a6a; }
.combat-log-entry.floor { color: var(--text-accent); font-weight: 600; }
.combat-log-entry.victory { color: var(--accent-primary); font-weight: 600; }

/* Combat Actions */
.combat-actions {
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-top: 1px solid var(--border-color);
    flex-shrink: 0;
}

#ability-buttons {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-sm);
}

.ability-btn {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
    gap: 2px;
}

.ability-btn:hover:not(:disabled) {
    background: var(--bg-hover);
}

.ability-btn.disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.ability-btn-name {
    font-weight: 600;
    font-size: var(--font-size-sm);
}

.ability-btn-type {
    font-size: var(--font-size-xs);
    color: var(--text-accent);
    font-style: italic;
}

.ability-btn-stats {
    display: flex;
    gap: var(--spacing-sm);
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.ability-btn-element {
    padding: 1px 4px;
    border-radius: var(--border-radius-sm);
    cursor: help;
}

.ability-btn-element.element-earth {
    background: rgba(139, 115, 85, 0.3);
    color: var(--element-earth);
}

.ability-btn-element.element-nature {
    background: rgba(90, 138, 90, 0.3);
    color: var(--element-nature);
}

.ability-btn-element.element-water {
    background: rgba(74, 122, 154, 0.3);
    color: var(--element-water);
}

.ability-btn-element.element-fire {
    background: rgba(168, 90, 74, 0.3);
    color: var(--element-fire);
}

.ability-btn-element.element-wind {
    background: rgba(138, 122, 154, 0.3);
    color: var(--element-wind);
}

.ability-btn-desc {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-top: 2px;
    line-height: 1.3;
}

.other-actions {
    display: flex;
    gap: var(--spacing-xs);
    flex-wrap: wrap;
}

.other-actions .btn {
    flex: 1;
    min-width: 80px;
}

.action-buttons {
    display: flex;
    gap: var(--spacing-xs);
    flex-wrap: wrap;
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-top: 1px solid var(--border-color);
}

.action-buttons .btn {
    flex: 1;
    min-width: 80px;
    padding: var(--spacing-sm);
}

.action-buttons .btn-action {
    background: rgba(122, 154, 106, 0.3);
    border: 1px solid var(--accent-primary);
    color: var(--text-primary);
}

.action-buttons .btn-action:hover:not(:disabled) {
    background: rgba(122, 154, 106, 0.5);
}

.action-buttons .btn-action:disabled {
    background: var(--bg-card);
    border-color: var(--border-color);
    opacity: 0.5;
}

#swap-options {
    display: none;
    flex-direction: column;
    gap: var(--spacing-xs);
    margin-top: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border-radius: var(--border-radius-sm);
}

#swap-options.visible {
    display: flex;
}

.swap-btn {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    color: var(--text-primary);
}

.swap-btn:hover {
    background: var(--bg-hover);
}

.swap-thumb {
    width: 32px;
    height: 32px;
    image-rendering: pixelated;
}

.swap-health {
    margin-left: auto;
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

/* Element Badges */
.element-badge, .element-mini {
    padding: 2px 6px;
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 500;
    cursor: help;
}

.element-earth, .element-badge.element-earth {
    background: rgba(139, 115, 85, 0.2);
    color: var(--element-earth);
    border-color: var(--element-earth);
}

.element-nature, .element-badge.element-nature {
    background: rgba(90, 138, 90, 0.2);
    color: var(--element-nature);
    border-color: var(--element-nature);
}

.element-water, .element-badge.element-water {
    background: rgba(74, 122, 154, 0.2);
    color: var(--element-water);
    border-color: var(--element-water);
}

.element-fire, .element-badge.element-fire {
    background: rgba(168, 90, 74, 0.2);
    color: var(--element-fire);
    border-color: var(--element-fire);
}

.element-wind, .element-badge.element-wind {
    background: rgba(138, 122, 154, 0.2);
    color: var(--element-wind);
    border-color: var(--element-wind);
}

/* Rarity Badges */
.rarity-badge {
    padding: 2px 6px;
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 500;
}

.rarity-common {
    background: rgba(128, 128, 128, 0.2);
    color: var(--rarity-common);
}

.rarity-uncommon {
    background: rgba(74, 154, 74, 0.2);
    color: var(--rarity-uncommon);
}

.rarity-rare {
    background: rgba(74, 122, 202, 0.2);
    color: var(--rarity-rare);
}

.rarity-mythical {
    background: rgba(154, 90, 202, 0.2);
    color: var(--rarity-mythical);
}

/* Cards */
.vasen-card {
    padding: var(--spacing-sm);
    margin-bottom: var(--spacing-xs);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-left: 3px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: all 0.2s;
}

.vasen-card:hover {
    background: var(--bg-hover);
}

.vasen-card.element-earth { border-left-color: var(--element-earth); }
.vasen-card.element-nature { border-left-color: var(--element-nature); }
.vasen-card.element-water { border-left-color: var(--element-water); }
.vasen-card.element-fire { border-left-color: var(--element-fire); }
.vasen-card.element-wind { border-left-color: var(--element-wind); }

.vasen-card-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-xs);
}

.vasen-thumb {
    width: 36px;
    height: 36px;
    image-rendering: pixelated;
}

.vasen-card-info {
    display: flex;
    flex-direction: column;
    flex: 1;
}

.vasen-name {
    font-weight: 600;
    font-size: var(--font-size-sm);
}

.vasen-level {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.vasen-add-btn {
    width: 24px;
    height: 24px;
    padding: 0;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    cursor: pointer;
    font-size: var(--font-size-md);
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    margin-left: auto;
}

.vasen-add-btn:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
    border-color: var(--border-light);
}

.vasen-card-details {
    display: flex;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-xs);
}

.party-badge {
    padding: 2px 6px;
    background: var(--accent-primary);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    color: var(--text-primary);
}

.vasen-card-health {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.mini-health-bar {
    flex: 1;
    height: 4px;
    background: var(--bg-primary);
    border-radius: 2px;
    overflow: hidden;
}

.mini-health-fill {
    height: 100%;
    background: var(--health-color);
}

.mini-health-text {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

/* Family Section */
.family-section {
    margin-bottom: var(--spacing-md);
}

.family-header {
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--border-radius-sm);
    margin-bottom: var(--spacing-xs);
    font-size: var(--font-size-sm);
    color: var(--text-accent);
    cursor: help;
}

/* Vasen Details */
.details-header {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.details-image {
    width: 96px;
    height: 96px;
    image-rendering: pixelated;
}

.details-identity {
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.details-name {
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-xs);
}

.details-meta {
    display: flex;
    gap: var(--spacing-xs);
    flex-wrap: wrap;
}

.family-badge {
    padding: 2px 6px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    cursor: help;
}

.details-description {
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border-radius: var(--border-radius-sm);
    margin-bottom: var(--spacing-md);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.details-description h4.description-toggle {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    cursor: pointer;
    user-select: none;
    margin: 0 0 var(--spacing-xs) 0;
    color: var(--text-accent);
    font-size: var(--font-size-sm);
}

.details-description h4.description-toggle:hover {
    color: var(--text-primary);
}

.toggle-icon {
    font-size: var(--font-size-xs);
    transition: transform 0.2s;
}

.description-content {
    overflow: hidden;
    transition: max-height 0.3s ease, opacity 0.3s ease;
    max-height: 200px;
    opacity: 1;
}

.description-content.collapsed {
    max-height: 0;
    opacity: 0;
}

.description-content p {
    margin: 0;
}

.details-level {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.exp-bar {
    flex: 1;
    height: 8px;
    background: var(--bg-primary);
    border-radius: 4px;
    overflow: hidden;
}

.exp-fill {
    height: 100%;
    background: var(--exp-color);
}

.exp-text {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.max-level-badge {
    padding: 2px 6px;
    background: var(--rarity-mythical);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
}

.details-resources {
    margin-bottom: var(--spacing-md);
}

.resource-bar {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-xs);
}

.resource-label {
    width: 50px;
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.resource-bar-bg {
    flex: 1;
    height: 12px;
    background: var(--bg-primary);
    border-radius: 6px;
    overflow: hidden;
}

.resource-bar-fill {
    height: 100%;
}

.resource-value {
    width: 70px;
    font-size: var(--font-size-xs);
    text-align: right;
}

.details-attributes h4,
.details-temperament h4,
.details-runes h4,
.details-abilities h4,
.details-element-matchups h4 {
    margin-bottom: var(--spacing-sm);
    font-size: var(--font-size-sm);
    color: var(--text-accent);
}

.attribute-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-md);
}

.attribute-item {
    display: flex;
    justify-content: space-between;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-card);
    border-radius: var(--border-radius-sm);
    cursor: help;
}

.attr-name {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.attr-value {
    font-weight: 600;
}

.details-temperament {
    margin-bottom: var(--spacing-md);
}

.temperament-name {
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-card);
    border-radius: var(--border-radius-sm);
    cursor: help;
}

.details-runes {
    margin-bottom: var(--spacing-md);
}

.rune-slots {
    display: flex;
    gap: var(--spacing-sm);
}

.rune-slot {
    flex: 1;
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border: 1px dashed var(--border-color);
    border-radius: var(--border-radius-sm);
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
}

.rune-slot.filled {
    border-style: solid;
    border-color: var(--accent-secondary);
    cursor: help;
}

.rune-slot.locked {
    opacity: 0.5;
    cursor: not-allowed;
}

.rune-slot:hover:not(.locked) {
    border-color: var(--border-light);
}

.rune-symbol {
    font-size: var(--font-size-xl);
    display: block;
}

.rune-name {
    font-size: var(--font-size-xs);
}

.rune-placeholder {
    color: var(--text-muted);
    font-size: var(--font-size-xs);
}

.rune-remove-btn {
    position: absolute;
    top: 2px;
    right: 2px;
    width: 16px;
    height: 16px;
    padding: 0;
    background: var(--accent-danger);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 12px;
    cursor: pointer;
    line-height: 1;
}

.details-abilities {
    margin-bottom: var(--spacing-md);
}

.abilities-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.ability-item {
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border-radius: var(--border-radius-sm);
    margin-bottom: var(--spacing-xs);
}

.ability-item.locked {
    opacity: 0.5;
}

.ability-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-xs);
}

.ability-name {
    font-weight: 600;
    font-size: var(--font-size-sm);
}

.ability-type-tag {
    font-size: var(--font-size-xs);
    font-style: italic;
    color: var(--text-accent);
}

.ability-element {
    font-size: var(--font-size-xs);
    padding: 1px 4px;
    border-radius: var(--border-radius-sm);
    cursor: help;
}

.ability-element.element-earth {
    background: rgba(139, 115, 85, 0.3);
    color: var(--element-earth);
}

.ability-element.element-nature {
    background: rgba(90, 138, 90, 0.3);
    color: var(--element-nature);
}

.ability-element.element-water {
    background: rgba(74, 122, 154, 0.3);
    color: var(--element-water);
}

.ability-element.element-fire {
    background: rgba(168, 90, 74, 0.3);
    color: var(--element-fire);
}

.ability-element.element-wind {
    background: rgba(138, 122, 154, 0.3);
    color: var(--element-wind);
}

.ability-stats {
    display: flex;
    gap: var(--spacing-sm);
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    margin-bottom: var(--spacing-xs);
}

.ability-description {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin: 0;
    line-height: 1.3;
}

.ability-details {
    display: flex;
    gap: var(--spacing-sm);
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.learn-level {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    font-style: italic;
}

/* Element Matchups */
.matchup-section {
    margin-bottom: var(--spacing-sm);
}

.matchup-section h5 {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-bottom: var(--spacing-xs);
}

.matchup-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 2px;
}

.matchup-item {
    padding: 2px 4px;
    text-align: center;
    font-size: var(--font-size-xs);
    border-radius: var(--border-radius-sm);
}

.matchup-item.potent {
    background: rgba(90, 138, 90, 0.2);
}

.matchup-item.weak {
    background: rgba(138, 90, 90, 0.2);
}

.matchup-element {
    display: block;
    font-weight: 500;
}

.matchup-result {
    color: var(--text-secondary);
}

.details-actions {
    margin-top: var(--spacing-md);
}

/* Rune Grid */
.rune-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: var(--spacing-sm);
}

.rune-card {
    padding: var(--spacing-md);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all 0.2s;
}

.rune-card:hover {
    background: var(--bg-hover);
}

.rune-card.equipped {
    border-color: var(--accent-secondary);
}

.rune-card .rune-symbol {
    font-size: 2rem;
    display: block;
    margin-bottom: var(--spacing-xs);
}

.rune-card .rune-name {
    font-weight: 600;
    margin-bottom: var(--spacing-xs);
}

.rune-flavor {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    font-style: italic;
    margin-bottom: var(--spacing-xs);
}

.rune-effect {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.equipped-to {
    display: block;
    margin-top: var(--spacing-sm);
    font-size: var(--font-size-xs);
    color: var(--accent-secondary);
}

/* Item Grid */
.item-grid {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.item-card {
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: all 0.2s;
}

.item-card:hover {
    background: var(--bg-hover);
}

.item-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: var(--spacing-xs);
}

.item-name {
    font-weight: 600;
}

.item-count {
    color: var(--text-secondary);
}

.item-description {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    margin: 0;
}

/* Modals */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    z-index: 1000;
    align-items: center;
    justify-content: center;
}

.modal.active {
    display: flex;
}

/* Dialogue modal appears on top of other modals (e.g., reset confirmation over settings) */
#dialogue-modal {
    z-index: 1100;
}

.modal-content {
    width: 90%;
    max-width: 500px;
    max-height: 80vh;
    padding: var(--spacing-lg);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    overflow-y: auto;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-md);
}

.modal-header h3 {
    color: var(--text-accent);
}

.modal-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: var(--font-size-xl);
    cursor: pointer;
}

.modal-close:hover {
    color: var(--text-primary);
}

.modal-body {
    margin-bottom: var(--spacing-md);
}

.modal-footer {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: center;
}

/* Center close buttons at bottom of modals */
#close-settings,
#close-profile,
#close-combat-tips,
#close-gift-modal,
#close-heal-modal,
#close-rune-equip-modal,
#close-rune-to-vasen-modal {
    display: block;
    margin: var(--spacing-md) auto 0 auto;
}

/* Settings Modal */
.settings-section {
    margin-bottom: var(--spacing-lg);
}

.settings-section h4 {
    margin-bottom: var(--spacing-sm);
    color: var(--text-accent);
}

.settings-note {
    margin-bottom: var(--spacing-md);
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
}

.save-buttons {
    display: flex;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.save-buttons .btn {
    flex: 1;
}

.settings-section .btn-danger {
    width: 100%;
    margin-top: var(--spacing-sm);
}

.import-textarea {
    margin-bottom: var(--spacing-md);
}

.settings-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.settings-row label {
    flex: 1;
}

textarea {
    width: 100%;
    min-height: 100px;
    padding: var(--spacing-sm);
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-primary);
    font-family: monospace;
    resize: vertical;
}

/* Profile Modal */
.profile-name-section {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: var(--bg-card);
    border-radius: var(--border-radius);
    margin-bottom: var(--spacing-md);
}

.profile-name-section label {
    font-weight: bold;
}

.profile-name-section input {
    flex: 1;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-dark);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    color: var(--text-primary);
}

.profile-stats {
    padding: var(--spacing-md);
    background: var(--bg-card);
    border-radius: var(--border-radius);
    margin-bottom: var(--spacing-md);
}

.profile-stats p {
    margin-bottom: var(--spacing-xs);
}

.achievements-section,
.records-section {
    margin-bottom: var(--spacing-md);
}

.achievements-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-sm);
}

.achievement {
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border-radius: var(--border-radius-sm);
    opacity: 0.5;
}

.achievement.earned {
    opacity: 1;
    border-left: 3px solid var(--accent-primary);
}

.achievement-name {
    display: block;
    font-weight: 600;
    font-size: var(--font-size-sm);
}

.achievement-desc {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.record-entry {
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border-radius: var(--border-radius-sm);
    margin-bottom: var(--spacing-xs);
}

.record-mode {
    display: block;
    font-weight: 600;
}

.record-team {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.no-record {
    color: var(--text-muted);
    font-style: italic;
}

/* Dialogue Modal */
#dialogue-message {
    line-height: 1.6;
}

#dialogue-message .rune-reveal {
    text-align: center;
    margin: var(--spacing-md) 0;
}

#dialogue-message .rune-symbol.large {
    font-size: 3rem;
}

#dialogue-message .rune-hint {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    font-style: italic;
}

#dialogue-message .new-record {
    color: var(--rarity-mythical);
    font-weight: 600;
    font-size: var(--font-size-lg);
}

#dialogue-buttons {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: center;
    margin-top: var(--spacing-md);
}

/* Gift/Heal/Swap Modals */
.gift-item-btn,
.heal-vasen-btn,
.knockout-swap-btn,
.rune-equip-btn,
.rune-to-vasen-btn {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    width: 100%;
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-primary);
    cursor: pointer;
    margin-bottom: var(--spacing-xs);
    text-align: left;
}

.gift-item-btn:hover,
.heal-vasen-btn:hover,
.knockout-swap-btn:hover,
.rune-equip-btn:hover,
.rune-to-vasen-btn:hover {
    background: var(--bg-hover);
}

.rune-to-vasen-btn.current-owner {
    opacity: 0.6;
    cursor: not-allowed;
    border-color: var(--accent-primary);
    background: rgba(138, 154, 122, 0.1);
}

.rune-to-vasen-btn.current-owner:hover {
    background: rgba(138, 154, 122, 0.1);
}

.heal-vasen-img,
.rune-vasen-img,
.swap-img {
    width: 48px;
    height: 48px;
    image-rendering: pixelated;
}

.heal-vasen-info,
.rune-vasen-info,
.swap-info {
    display: flex;
    flex-direction: column;
}

.heal-amount {
    color: var(--health-color);
    font-size: var(--font-size-sm);
}

/* Combat Tips Content */
.combat-tips-content {
    font-size: var(--font-size-sm);
    line-height: 1.7;
}

.combat-tips-content h4 {
    color: var(--text-accent);
    margin-top: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.combat-tips-content p {
    margin-bottom: var(--spacing-sm);
}

/* Tips Content */
.tips-content {
    font-size: var(--font-size-sm);
    line-height: 1.5;
}

.tips-content h4 {
    color: var(--text-accent);
    margin-top: var(--spacing-md);
    margin-bottom: var(--spacing-xs);
    font-size: var(--font-size-sm);
}

.tips-content h4:first-child {
    margin-top: 0;
}

.tips-content p {
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--text-secondary);
}

/* Element Matrix */
.matrix-legend {
    display: flex;
    gap: var(--spacing-md);
    font-size: var(--font-size-xs);
    margin-bottom: var(--spacing-sm);
}

.legend-potent {
    color: var(--element-nature);
}

.legend-neutral {
    color: var(--text-muted);
}

.legend-weak {
    color: var(--accent-danger);
}

.element-matrix {
    width: 100%;
    border-collapse: collapse;
    font-size: var(--font-size-xs);
    margin-bottom: var(--spacing-sm);
}

.element-matrix th,
.element-matrix td {
    padding: 4px 6px;
    text-align: center;
    border: 1px solid var(--border-color);
}

.element-matrix thead th {
    background: var(--bg-tertiary);
    font-weight: 600;
}

.element-matrix tbody th {
    background: var(--bg-tertiary);
    font-weight: 600;
    text-align: right;
}

.element-matrix td.potent {
    background: rgba(90, 138, 90, 0.3);
    color: var(--element-nature);
    font-weight: 600;
}

.element-matrix td.neutral {
    background: var(--bg-card);
    color: var(--text-muted);
}

.element-matrix td.weak {
    background: rgba(176, 106, 106, 0.3);
    color: var(--accent-danger);
    font-weight: 600;
}

/* Messages */
#message-container {
    position: fixed;
    top: 60px;
    right: var(--spacing-md);
    z-index: 999;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.game-message {
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    animation: slideIn 0.3s ease;
}

.game-message.error {
    border-color: var(--accent-danger);
    background: rgba(154, 90, 90, 0.2);
}

.game-message.fade-out {
    animation: fadeOut 0.3s ease forwards;
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes fadeOut {
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* Footer */
.game-footer {
    grid-column: 1 / -1;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-xs) var(--spacing-md);
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.game-footer a {
    color: var(--text-secondary);
    text-decoration: none;
}

.game-footer a:hover {
    color: var(--text-primary);
}

/* Empty states */
.empty-message {
    text-align: center;
    color: var(--text-muted);
    padding: var(--spacing-lg);
    font-style: italic;
}

/* Scrollbar styling */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--bg-primary);
}

::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--border-light);
}

/* Responsive Design */
@media (max-width: 1200px) {
    .game-main {
        grid-template-columns: 240px 240px 1fr;
    }
}

@media (max-width: 992px) {
    .game-main {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto 1fr;
    }

    .panel-left {
        order: 3;
        border-right: none;
        border-top: 1px solid var(--border-color);
        max-height: 300px;
    }

    .panel-middle {
        order: 1;
        border-right: none;
    }

    .panel-right {
        order: 2;
        border-top: 1px solid var(--border-color);
        max-height: 400px;
    }

    .party-slots {
        flex-wrap: wrap;
    }

    .combat-arena {
        flex-direction: column;
    }

    #ability-buttons {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 600px) {
    .game-header {
        flex-direction: column;
        gap: var(--spacing-sm);
    }

    #starter-options {
        flex-direction: column;
    }

    .starter-card {
        width: 100%;
        max-width: 300px;
    }

    .modal-content {
        width: 95%;
        padding: var(--spacing-md);
    }

    #ability-buttons {
        grid-template-columns: 1fr;
    }

    .other-actions {
        flex-direction: column;
    }

    .matchup-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}
